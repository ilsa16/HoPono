{% extends "admin/base_admin.html" %}
{% block title %}Messaging{% endblock %}
{% block page_title %}Test Messaging{% endblock %}

{% block admin_content %}
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
        <div class="flex items-center space-x-3 mb-6">
            <div class="w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                </svg>
            </div>
            <div>
                <h2 class="text-lg font-semibold text-gray-800">Send Test SMS</h2>
                <p class="text-sm text-gray-500">via Send.to</p>
            </div>
        </div>

        <form method="POST" action="{{ url_for('admin_messaging.send_test_sms') }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                    <input type="tel" name="phone" required placeholder="+357..."
                           class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-hopono-blue focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Message</label>
                    <textarea name="message" rows="5" required
                              class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-hopono-blue focus:border-transparent">Hi! This is a test reminder from HoPono Massage. Your session is tomorrow at 10:00. Questions? Call +35796537959. See you soon!</textarea>
                    <p class="text-xs text-gray-400 mt-1">Keep under 160 characters for a single SMS segment.</p>
                </div>
                <button type="submit"
                        class="w-full bg-hopono-blue-deeper hover:bg-hopono-blue-dark text-white font-medium py-2.5 rounded-lg text-sm transition duration-200">
                    Send Test SMS
                </button>
            </div>
        </form>
    </div>

    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
        <div class="flex items-center space-x-3 mb-6">
            <div class="w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                </svg>
            </div>
            <div>
                <h2 class="text-lg font-semibold text-gray-800">Send Test Email</h2>
                <p class="text-sm text-gray-500">via Brevo</p>
            </div>
        </div>

        <form method="POST" action="{{ url_for('admin_messaging.send_test_email') }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                    <input type="email" name="to_email" required placeholder="you@example.com"
                           class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-hopono-blue focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Subject</label>
                    <input type="text" name="subject" required value="Reminder: Your HoPono appointment"
                           class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-hopono-blue focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">HTML Content</label>
                    <textarea name="html_content" rows="10" required
                              class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm font-mono focus:ring-2 focus:ring-hopono-blue focus:border-transparent"><div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background-color: #0c1117; border-radius: 16px; overflow: hidden;">
  <div style="background-color: #161b22; padding: 32px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.05);">
    <h1 style="color: #dba11d; font-family: Georgia, serif; margin: 0; font-size: 28px;">HoPono Massage</h1>
    <p style="color: rgba(255,255,255,0.3); font-size: 12px; margin: 8px 0 0 0; text-transform: uppercase; letter-spacing: 2px;">Nicosia, Cyprus</p>
  </div>
  <div style="padding: 36px 32px;">
    <h2 style="color: #dba11d; font-size: 20px; margin: 0 0 20px 0;">Appointment Reminder</h2>
    <p style="color: rgba(255,255,255,0.7); font-size: 15px;">Hi there,</p>
    <p style="color: rgba(255,255,255,0.5); font-size: 15px;">This is a test email from HoPono Massage.</p>
    <div style="background-color: #161b22; padding: 24px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05); margin: 20px 0;">
      <p style="color: rgba(255,255,255,0.4); margin: 0;"><strong style="color: white;">Service:</strong> Test Massage</p>
      <p style="color: rgba(255,255,255,0.4); margin: 8px 0 0 0;"><strong style="color: white;">Date:</strong> Tomorrow</p>
      <p style="color: #dba11d; margin: 8px 0 0 0;"><strong style="color: white;">Time:</strong> 10:00</p>
    </div>
    <p style="color: rgba(255,255,255,0.5); font-size: 14px;">Questions? Call <a href="tel:+35796537959" style="color: #dba11d;">+357 96 537 959</a></p>
  </div>
  <div style="background-color: #161b22; padding: 20px 32px; text-align: center; border-top: 1px solid rgba(255,255,255,0.05);">
    <p style="color: rgba(255,255,255,0.2); font-size: 12px; margin: 0;">&copy; HoPono Massage Studio</p>
  </div>
</div></textarea>
                    <p class="text-xs text-gray-400 mt-1">Edit the HTML content above to customize your test email.</p>
                </div>
                <button type="submit"
                        class="w-full bg-hopono-blue-deeper hover:bg-hopono-blue-dark text-white font-medium py-2.5 rounded-lg text-sm transition duration-200">
                    Send Test Email
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
